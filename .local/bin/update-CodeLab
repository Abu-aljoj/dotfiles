#!/usr/bin/env zsh

# Set working repo path
REPO="$HOME/CodeLab"

# Exit if repo doesn't exist
if [ ! -d "$REPO" ]; then
  echo "Dotfiles repo not found at $REPO"
  exit 1
fi

echo "[1/3] Adding changes to Git..."
cd "$REPO" || exit 1
git add .

echo "[2/3] Enter your commit message:"
read -r COMMIT_MSG

# Exit if message is empty
if [ -z "$COMMIT_MSG" ]; then
  echo "Commit message cannot be empty. Aborting."
  exit 1
fi

echo "[3/3] Committing and pushing..."
git commit -m "$COMMIT_MSG"
git push

echo "Dotfiles updated and pushed with message: $COMMIT_MSG"
